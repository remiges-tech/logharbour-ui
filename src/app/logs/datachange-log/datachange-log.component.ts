
import { Component, inject } from '@angular/core';
import { DataChangeLogs } from 'src/models/common-interfaces';
import { DataChangeLogResp } from 'src/models/request-response-interfaces';
import { CommonService } from 'src/services/common.service';
import { CONSTANTS } from 'src/services/constants.service';
import { DatachangeLogService } from 'src/services/datachange-log.service';

interface SelectedDataInterface{
  apps: string | undefined,
  class?: string | undefined,
  users?: string | undefined,
  entityId?: string | undefined,
  fields?: string | undefined,
  days: number | 0
}
@Component({
  selector: 'app-datachange-log',
  templateUrl: './datachange-log.component.html',
  styleUrls: ['./datachange-log.component.scss']
})
export class DatachangeLogComponent {
  fileName: string = 'DatachangeLogComponent';
  private _dataChangeLogService = inject(DatachangeLogService);
  private _commonService = inject(CommonService);
  appsList: string[] = ['BSE', 'NSE', 'NSDL', 'NDML']
  classList: string[] = ['UCC', 'AMC']
  usersList: string[] = ['ABC', 'XYZ', 'DFE']

  selectedData:SelectedDataInterface = {
    apps: undefined,
    days: 0
  }

  isShowBottomSection: boolean = false;

  data: DataChangeLogs[] = [{
    app: "crux",
    system: "DESKTOP-6P0BUCF",
    module: "",
    type: "C",
    pri: "Info",
    when: "2024-04-15T05:40:38.6600928Z",
    who: "",
    op: "",
    class: "ruleset",
    instance: "\b",
    status: 0,
    remote_ip: "203.0.113.45",
    msg: "Updated ruleset",
    data: {
      entity: "ruleset",
      op: "Update",
      changes: [
        {
          field: "brwf",
          old_value: this.getTypeOfValue("W"),
          new_value: this.getTypeOfValue("W")
        },
        {
          field: "setname",
          old_value: this.getTypeOfValue("ucc_user_cr"),
          new_value: this.getTypeOfValue("ucc_user_cr")
        },
        {
          field: "ruleset",
          old_value: this.getTypeOfValue("[{\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"getcustdetails\"], \"properties\": {\"nextstep\": \"getcustdetails\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"start\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"aof\", \"dpandbankaccvalid\", \"kycvalid\", \"nomauth\"], \"properties\": {\"nextstep\": \"aof\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"getcustdetails\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"getcustdetails\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"aof\", \"kycvalid\", \"nomauth\", \"bankaccvalid\"], \"properties\": {\"nextstep\": \"aof\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"getcustdetails\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"physical\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"getcustdetails\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"physical\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"sendauthlinktoclient\"], \"properties\": {\"nextstep\": \"sendauthlinktoclient\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"kycvalid\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"kycvalid\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"sendauthlinktoclient\"], \"properties\": {\"nextstep\": \"sendauthlinktoclient\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"dpandbankvalidation\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"dpandbankvalidation\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"sendauthlinktoclient\"], \"properties\": {\"nextstep\": \"sendauthlinktoclient\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"bankaccvalid\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"bankaccvalid\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"sendauthlinktoclient\"], \"properties\": {\"nextstep\": \"sendauthlinktoclient\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"nomauth\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"nomauth\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"sendauthlinktoclient\"], \"properties\": {\"nextstep\": \"sendauthlinktoclient\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"aof\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"aof\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"sendauthlinktoclient\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"sendauthlinktoclient\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}]"),
          new_value: this.getTypeOfValue("[\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"start\"\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"physical\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"getcustdetails\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"getcustdetails\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"getcustdetails\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"aof\",\n        \"dpandbankaccvalid\",\n        \"kycvalid\",\n        \"nomauth\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"aof\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"getcustdetails\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"getcustdetails\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"physical\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"aof\",\n        \"kycvalid\",\n        \"nomauth\",\n        \"bankaccvalid\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"aof\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"getcustdetails\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"physical\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"kycvalid\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"sendauthlinktoclient\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"sendauthlinktoclient\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"kycvalid\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"dpandbankvalidation\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"sendauthlinktoclient\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"sendauthlinktoclient\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"dpandbankvalidation\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"bankaccvalid\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"sendauthlinktoclient\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"sendauthlinktoclient\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"bankaccvalid\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"nomauth\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"sendauthlinktoclient\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"sendauthlinktoclient\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"nomauth\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"aof\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"sendauthlinktoclient\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"sendauthlinktoclient\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"aof\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"sendauthlinktoclient\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"sendauthlinktoclient\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  }\n]")
        }
      ]
    }
  },{
    app: "crux",
    system: "DESKTOP-6P0BUCF",
    module: "",
    type: "C",
    pri: "Info",
    when: "2024-04-15T05:40:38.6600928Z",
    who: "",
    op: "",
    class: "ruleset",
    instance: "\b",
    status: 0,
    remote_ip: "203.0.113.45",
    msg: "Updated ruleset",
    data: {
      entity: "ruleset",
      op: "Update",
      changes: [
        {
          field: "brwf",
          old_value: this.getTypeOfValue("W"),
          new_value: this.getTypeOfValue("W")
        },
        {
          field: "setname",
          old_value: this.getTypeOfValue("ucc_user_cr"),
          new_value: this.getTypeOfValue("ucc_user_cr")
        },
        {
          field: "ruleset",
          old_value: this.getTypeOfValue("[{\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"getcustdetails\"], \"properties\": {\"nextstep\": \"getcustdetails\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"start\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"aof\", \"dpandbankaccvalid\", \"kycvalid\", \"nomauth\"], \"properties\": {\"nextstep\": \"aof\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"getcustdetails\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"getcustdetails\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"aof\", \"kycvalid\", \"nomauth\", \"bankaccvalid\"], \"properties\": {\"nextstep\": \"aof\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"getcustdetails\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"physical\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"getcustdetails\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"physical\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"sendauthlinktoclient\"], \"properties\": {\"nextstep\": \"sendauthlinktoclient\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"kycvalid\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"kycvalid\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"sendauthlinktoclient\"], \"properties\": {\"nextstep\": \"sendauthlinktoclient\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"dpandbankvalidation\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"dpandbankvalidation\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"sendauthlinktoclient\"], \"properties\": {\"nextstep\": \"sendauthlinktoclient\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"bankaccvalid\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"bankaccvalid\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"sendauthlinktoclient\"], \"properties\": {\"nextstep\": \"sendauthlinktoclient\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"nomauth\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"nomauth\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [\"sendauthlinktoclient\"], \"properties\": {\"nextstep\": \"sendauthlinktoclient\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"aof\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"aof\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"sendauthlinktoclient\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": false, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}, {\"NFailed\": 0, \"NMatched\": 0, \"ruleactions\": {\"tasks\": [], \"properties\": {\"done\": \"true\"}}, \"rulepattern\": [{\"op\": \"eq\", \"val\": \"sendauthlinktoclient\", \"attr\": \"step\"}, {\"op\": \"eq\", \"val\": true, \"attr\": \"stepfailed\"}, {\"op\": \"eq\", \"val\": \"demat\", \"attr\": \"mode\"}]}]"),
          new_value: this.getTypeOfValue("[\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"start\"\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"physical\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"getcustdetails\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"getcustdetails\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"getcustdetails\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"aof\",\n        \"dpandbankaccvalid\",\n        \"kycvalid\",\n        \"nomauth\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"aof\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"getcustdetails\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"getcustdetails\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"physical\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"aof\",\n        \"kycvalid\",\n        \"nomauth\",\n        \"bankaccvalid\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"aof\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"getcustdetails\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"physical\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"kycvalid\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"sendauthlinktoclient\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"sendauthlinktoclient\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"kycvalid\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"dpandbankvalidation\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"sendauthlinktoclient\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"sendauthlinktoclient\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"dpandbankvalidation\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"bankaccvalid\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"sendauthlinktoclient\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"sendauthlinktoclient\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"bankaccvalid\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"nomauth\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"sendauthlinktoclient\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"sendauthlinktoclient\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"nomauth\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"aof\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [\n        \"sendauthlinktoclient\"\n      ],\n      \"properties\": {\n        \"nextstep\": \"sendauthlinktoclient\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"aof\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"sendauthlinktoclient\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": false\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  },\n  {\n    \"rulepattern\": [\n      {\n        \"attr\": \"step\",\n        \"op\": \"eq\",\n        \"val\": \"sendauthlinktoclient\"\n      },\n      {\n        \"attr\": \"stepfailed\",\n        \"op\": \"eq\",\n        \"val\": true\n      },\n      {\n        \"attr\": \"mode\",\n        \"op\": \"eq\",\n        \"val\": \"demat\"\n      }\n    ],\n    \"ruleactions\": {\n      \"tasks\": [],\n      \"properties\": {\n        \"done\": \"true\"\n      }\n    },\n    \"NMatched\": 0,\n    \"NFailed\": 0\n  }\n]")
        }
      ]
    }
  }]


  getTypeOfValue(value:string){
    try{
      return JSON.parse(value)
    }catch(err){
      return value
    }
  }

}
